{"ast":null,"code":"import { LOGOUT_SUCCESS, NEW_USER_ADD, NEW_USER_ADD_CLEAR, USER_LOGOUT, CONTACT_GET_SUCCESS, MESSAGE_GET_SUCCESS, MESSAGE_SEND_SUCCESS, SOCKET_MESSAGE, UPDATE_CONTACT_MESSAGE, MESSAGE_SEND_SUCCESS_CLEAR, SEEN_MESSAGE, DELIVERED_MESSAGE, UPDATE, MESSAGE_GET_SUCCESS_CLEAR, SEEN_ALL } from \"../types/messengerType\";\nconst messengerState = {\n  contacts: [],\n  message: [],\n  messageSendSuccess: false,\n  messageGetSuccess: false,\n  new_user_add: ''\n};\nexport const messengerReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : messengerState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  const {\n    type,\n    payload\n  } = action;\n\n  if (type === CONTACT_GET_SUCCESS) {\n    return { ...state,\n      contacts: payload.contacts\n    };\n  }\n\n  if (type === MESSAGE_GET_SUCCESS) {\n    return { ...state,\n      messageGetSuccess: true,\n      message: payload.message\n    };\n  }\n\n  if (type === MESSAGE_SEND_SUCCESS) {\n    return { ...state,\n      messageSendSuccess: true,\n      message: [...state.message, payload.message]\n    };\n  }\n\n  if (type === SOCKET_MESSAGE) {\n    return { ...state,\n      message: [...state.message, payload.message]\n    };\n  }\n\n  if (type === UPDATE_CONTACT_MESSAGE) {\n    // Ca bug ici\n    const index = state.contacts.findIndex(c => c.contactInfo._id === payload.messageInfo.receiverId || c.contactInfo._id === payload.messageInfo.senderId);\n    console.log(\"index:\");\n    console.log(index);\n\n    if (index != -1) {\n      state.contacts[index].messageInfo = payload.messageInfo;\n      state.contacts[index].messageInfo.status = payload.status;\n    }\n\n    return state;\n  }\n\n  if (type === MESSAGE_SEND_SUCCESS_CLEAR) {\n    return { ...state,\n      messageSendSuccess: false\n    };\n  }\n\n  if (type === SEEN_MESSAGE) {\n    const index = state.contacts.findIndex(c => c.contactInfo._id === payload.messageInfo.receiverId || c.contactInfo._id === payload.messageInfo.senderId);\n    state.contacts[index].messageInfo.status = 'seen';\n    return { ...state\n    };\n  }\n\n  if (type === DELIVERED_MESSAGE) {\n    const index = state.contacts.findIndex(c => c.contactInfo._id === payload.messageInfo.receiverId || c.contactInfo._id === payload.messageInfo.senderId);\n    state.contacts[index].messageInfo.status = 'delivered';\n    return { ...state\n    };\n  }\n\n  if (type === UPDATE) {\n    const index = state.contacts.findIndex(c => c.contactInfo._id === payload.id);\n\n    if (state.contacts[index].messageInfo) {\n      state.contacts[index].messageInfo.status = 'seen';\n    }\n\n    return { ...state\n    };\n  }\n\n  if (type === MESSAGE_GET_SUCCESS_CLEAR) {\n    return { ...state,\n      messageGetSuccess: false\n    };\n  }\n\n  if (type === SEEN_ALL) {\n    const index = state.contacts.contactIndex(c => c.contactInfo._id === payload.receiverId);\n    state.contacts[index].messageInfo.status = 'seen';\n    return { ...state\n    };\n  }\n\n  if (type === LOGOUT_SUCCESS) {\n    return { ...state,\n      contacts: [],\n      message: [],\n      messageSendSuccess: false,\n      messageGetSuccess: false\n    };\n  }\n\n  if (type === NEW_USER_ADD) {\n    return { ...state,\n      new_user_add: payload.new_user_add\n    };\n  }\n\n  if (type === NEW_USER_ADD_CLEAR) {\n    return { ...state,\n      new_user_add: ''\n    };\n  }\n\n  if (type === USER_LOGOUT) {\n    return { ...state,\n      contacts: [],\n      message: [],\n      messageSendSuccess: false,\n      messageGetSuccess: false,\n      new_user_add: ''\n    };\n  }\n\n  return state;\n};","map":{"version":3,"names":["LOGOUT_SUCCESS","NEW_USER_ADD","NEW_USER_ADD_CLEAR","USER_LOGOUT","CONTACT_GET_SUCCESS","MESSAGE_GET_SUCCESS","MESSAGE_SEND_SUCCESS","SOCKET_MESSAGE","UPDATE_CONTACT_MESSAGE","MESSAGE_SEND_SUCCESS_CLEAR","SEEN_MESSAGE","DELIVERED_MESSAGE","UPDATE","MESSAGE_GET_SUCCESS_CLEAR","SEEN_ALL","messengerState","contacts","message","messageSendSuccess","messageGetSuccess","new_user_add","messengerReducer","state","action","type","payload","index","findIndex","c","contactInfo","_id","messageInfo","receiverId","senderId","console","log","status","id","contactIndex"],"sources":["C:/Users/LeahC/OneDrive/Documents/AKAD/ABSCHLUSS BAK PROJ BACH/PROJEKT/ProjectCode/keep-going-react-app/frontend/src/store/reducers/messengerReducer.js"],"sourcesContent":["import { LOGOUT_SUCCESS, NEW_USER_ADD, NEW_USER_ADD_CLEAR, USER_LOGOUT, CONTACT_GET_SUCCESS, MESSAGE_GET_SUCCESS, MESSAGE_SEND_SUCCESS, SOCKET_MESSAGE, UPDATE_CONTACT_MESSAGE, MESSAGE_SEND_SUCCESS_CLEAR, SEEN_MESSAGE, DELIVERED_MESSAGE, UPDATE, MESSAGE_GET_SUCCESS_CLEAR, SEEN_ALL } from \"../types/messengerType\";\r\n\r\nconst messengerState = {\r\n     contacts: [],\r\n     message: [],\r\n     messageSendSuccess: false,\r\n     messageGetSuccess: false,\r\n     new_user_add: '',\r\n}\r\n\r\nexport const messengerReducer = (state = messengerState, action) => {\r\n     const { type, payload } = action;\r\n\r\n\r\n\r\n     if (type === CONTACT_GET_SUCCESS) {\r\n          return {\r\n               ...state,\r\n               contacts: payload.contacts\r\n          }\r\n     }\r\n\r\n     if (type === MESSAGE_GET_SUCCESS) {\r\n          return {\r\n               ...state,\r\n               messageGetSuccess: true,\r\n               message: payload.message\r\n          }\r\n     }\r\n\r\n     if (type === MESSAGE_SEND_SUCCESS) {\r\n          return {\r\n               ...state,\r\n               messageSendSuccess: true,\r\n               message: [...state.message, payload.message]\r\n          }\r\n     }\r\n\r\n     if (type === SOCKET_MESSAGE) {\r\n          return {\r\n               ...state,\r\n               message: [...state.message, payload.message]\r\n          }\r\n     }\r\n\r\n     if (type === UPDATE_CONTACT_MESSAGE) { // Ca bug ici\r\n          const index = state.contacts.findIndex(c => c.contactInfo._id === payload.messageInfo.receiverId || c.contactInfo._id === payload.messageInfo.senderId);\r\n\r\n          console.log(\"index:\")\r\n          console.log(index)\r\n          if(index != -1){\r\n               state.contacts[index].messageInfo = payload.messageInfo\r\n               state.contacts[index].messageInfo.status = payload.status;\r\n          }\r\n          \r\n          return state;\r\n     } \r\n\r\n     \r\n\r\n\r\n     if (type === MESSAGE_SEND_SUCCESS_CLEAR) {\r\n          return {\r\n               ...state,\r\n               messageSendSuccess: false\r\n          }\r\n     }\r\n\r\n\r\n     if (type === SEEN_MESSAGE) {\r\n          const index = state.contacts.findIndex(c => c.contactInfo._id === payload.messageInfo.receiverId || c.contactInfo._id === payload.messageInfo.senderId);\r\n          state.contacts[index].messageInfo.status = 'seen';\r\n          return {\r\n               ...state\r\n          };\r\n     }\r\n\r\n     if (type === DELIVERED_MESSAGE) {\r\n          const index = state.contacts.findIndex(c => c.contactInfo._id === payload.messageInfo.receiverId || c.contactInfo._id === payload.messageInfo.senderId);\r\n          state.contacts[index].messageInfo.status = 'delivered';\r\n          return {\r\n               ...state\r\n          };\r\n     }\r\n\r\n\r\n     if (type === UPDATE) {\r\n          const index = state.contacts.findIndex(c => c.contactInfo._id === payload.id);\r\n          if (state.contacts[index].messageInfo) {\r\n               state.contacts[index].messageInfo.status = 'seen';\r\n          }\r\n          return {\r\n               ...state\r\n          }\r\n     }\r\n\r\n     if (type === MESSAGE_GET_SUCCESS_CLEAR) {\r\n          return {\r\n               ...state,\r\n               messageGetSuccess: false\r\n          }\r\n     }\r\n\r\n     if (type === SEEN_ALL) {\r\n          const index = state.contacts.contactIndex(c => c.contactInfo._id === payload.receiverId);\r\n          state.contacts[index].messageInfo.status = 'seen';\r\n          return {\r\n               ...state\r\n          }\r\n     }\r\n\r\n     if (type === LOGOUT_SUCCESS) {\r\n          return {\r\n               ...state,\r\n               contacts: [],\r\n               message: [],\r\n               messageSendSuccess: false,\r\n               messageGetSuccess: false,\r\n\r\n          }\r\n     }\r\n\r\n     if (type === NEW_USER_ADD) {\r\n          return {\r\n               ...state,\r\n               new_user_add: payload.new_user_add\r\n          }\r\n     }\r\n\r\n     if (type === NEW_USER_ADD_CLEAR) {\r\n          return {\r\n               ...state,\r\n               new_user_add: ''\r\n          }\r\n     }\r\n     if (type === USER_LOGOUT) {\r\n          return {\r\n               ...state,\r\n               contacts: [],\r\n               message: [],\r\n               messageSendSuccess: false,\r\n               messageGetSuccess: false,\r\n               new_user_add: '',\r\n\r\n          }\r\n\r\n     }\r\n\r\n\r\n\r\n     return state;\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}