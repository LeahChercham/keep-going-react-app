{"ast":null,"code":"import _toConsumableArray from\"C:/Users/LeahC/OneDrive/Documents/AKAD/ABSCHLUSS BAK PROJ BACH/PROJEKT/ProjectCode/keep-going-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/LeahC/OneDrive/Documents/AKAD/ABSCHLUSS BAK PROJ BACH/PROJEKT/ProjectCode/keep-going-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{LOGOUT_SUCCESS,NEW_USER_ADD,NEW_USER_ADD_CLEAR,USER_LOGOUT,CONTACT_GET_SUCCESS,MESSAGE_GET_SUCCESS,MESSAGE_SEND_SUCCESS,SOCKET_MESSAGE,UPDATE_CONTACT_MESSAGE,MESSAGE_SEND_SUCCESS_CLEAR,SEEN_MESSAGE,DELIVERED_MESSAGE,UPDATE,MESSAGE_GET_SUCCESS_CLEAR,SEEN_ALL}from\"../types/messengerType\";var messengerState={contacts:[],message:[],messageSendSuccess:false,messageGetSuccess:false,new_user_add:''};export var messengerReducer=function messengerReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:messengerState;var action=arguments.length>1?arguments[1]:undefined;var type=action.type,payload=action.payload;if(type===CONTACT_GET_SUCCESS){return _objectSpread(_objectSpread({},state),{},{contacts:payload.contacts});}if(type===MESSAGE_GET_SUCCESS){return _objectSpread(_objectSpread({},state),{},{messageGetSuccess:true,message:payload.message});}if(type===MESSAGE_SEND_SUCCESS){return _objectSpread(_objectSpread({},state),{},{messageSendSuccess:true,message:[].concat(_toConsumableArray(state.message),[payload.message])});}if(type===SOCKET_MESSAGE){return _objectSpread(_objectSpread({},state),{},{message:[].concat(_toConsumableArray(state.message),[payload.message])});}if(type===UPDATE_CONTACT_MESSAGE){// Ca bug ici\nvar index=state.contacts.findIndex(function(c){return c.contactInfo._id===payload.messageInfo.receiverId||c.contactInfo._id===payload.messageInfo.senderId;});console.log(\"index:\");console.log(index);if(index!=-1){state.contacts[index].messageInfo=payload.messageInfo;state.contacts[index].messageInfo.status=payload.status;}return state;}if(type===MESSAGE_SEND_SUCCESS_CLEAR){return _objectSpread(_objectSpread({},state),{},{messageSendSuccess:false});}if(type===SEEN_MESSAGE){var _index=state.contacts.findIndex(function(c){return c.contactInfo._id===payload.messageInfo.receiverId||c.contactInfo._id===payload.messageInfo.senderId;});state.contacts[_index].messageInfo.status='seen';return _objectSpread({},state);}if(type===DELIVERED_MESSAGE){var _index2=state.contacts.findIndex(function(c){return c.contactInfo._id===payload.messageInfo.receiverId||c.contactInfo._id===payload.messageInfo.senderId;});state.contacts[_index2].messageInfo.status='delivered';return _objectSpread({},state);}if(type===UPDATE){var _index3=state.contacts.findIndex(function(c){return c.contactInfo._id===payload.id;});if(state.contacts[_index3].messageInfo){state.contacts[_index3].messageInfo.status='seen';}return _objectSpread({},state);}if(type===MESSAGE_GET_SUCCESS_CLEAR){return _objectSpread(_objectSpread({},state),{},{messageGetSuccess:false});}if(type===SEEN_ALL){var _index4=state.contacts.contactIndex(function(c){return c.contactInfo._id===payload.receiverId;});state.contacts[_index4].messageInfo.status='seen';return _objectSpread({},state);}if(type===LOGOUT_SUCCESS){return _objectSpread(_objectSpread({},state),{},{contacts:[],message:[],messageSendSuccess:false,messageGetSuccess:false});}if(type===NEW_USER_ADD){return _objectSpread(_objectSpread({},state),{},{new_user_add:payload.new_user_add});}if(type===NEW_USER_ADD_CLEAR){return _objectSpread(_objectSpread({},state),{},{new_user_add:''});}if(type===USER_LOGOUT){return _objectSpread(_objectSpread({},state),{},{contacts:[],message:[],messageSendSuccess:false,messageGetSuccess:false,new_user_add:''});}return state;};","map":{"version":3,"names":["LOGOUT_SUCCESS","NEW_USER_ADD","NEW_USER_ADD_CLEAR","USER_LOGOUT","CONTACT_GET_SUCCESS","MESSAGE_GET_SUCCESS","MESSAGE_SEND_SUCCESS","SOCKET_MESSAGE","UPDATE_CONTACT_MESSAGE","MESSAGE_SEND_SUCCESS_CLEAR","SEEN_MESSAGE","DELIVERED_MESSAGE","UPDATE","MESSAGE_GET_SUCCESS_CLEAR","SEEN_ALL","messengerState","contacts","message","messageSendSuccess","messageGetSuccess","new_user_add","messengerReducer","state","action","type","payload","index","findIndex","c","contactInfo","_id","messageInfo","receiverId","senderId","console","log","status","id","contactIndex"],"sources":["C:/Users/LeahC/OneDrive/Documents/AKAD/ABSCHLUSS BAK PROJ BACH/PROJEKT/ProjectCode/keep-going-react-app/frontend/src/store/reducers/messengerReducer.js"],"sourcesContent":["import { LOGOUT_SUCCESS, NEW_USER_ADD, NEW_USER_ADD_CLEAR, USER_LOGOUT, CONTACT_GET_SUCCESS, MESSAGE_GET_SUCCESS, MESSAGE_SEND_SUCCESS, SOCKET_MESSAGE, UPDATE_CONTACT_MESSAGE, MESSAGE_SEND_SUCCESS_CLEAR, SEEN_MESSAGE, DELIVERED_MESSAGE, UPDATE, MESSAGE_GET_SUCCESS_CLEAR, SEEN_ALL } from \"../types/messengerType\";\r\n\r\nconst messengerState = {\r\n     contacts: [],\r\n     message: [],\r\n     messageSendSuccess: false,\r\n     messageGetSuccess: false,\r\n     new_user_add: '',\r\n}\r\n\r\nexport const messengerReducer = (state = messengerState, action) => {\r\n     const { type, payload } = action;\r\n\r\n\r\n\r\n     if (type === CONTACT_GET_SUCCESS) {\r\n          return {\r\n               ...state,\r\n               contacts: payload.contacts\r\n          }\r\n     }\r\n\r\n     if (type === MESSAGE_GET_SUCCESS) {\r\n          return {\r\n               ...state,\r\n               messageGetSuccess: true,\r\n               message: payload.message\r\n          }\r\n     }\r\n\r\n     if (type === MESSAGE_SEND_SUCCESS) {\r\n          return {\r\n               ...state,\r\n               messageSendSuccess: true,\r\n               message: [...state.message, payload.message]\r\n          }\r\n     }\r\n\r\n     if (type === SOCKET_MESSAGE) {\r\n          return {\r\n               ...state,\r\n               message: [...state.message, payload.message]\r\n          }\r\n     }\r\n\r\n     if (type === UPDATE_CONTACT_MESSAGE) { // Ca bug ici\r\n          const index = state.contacts.findIndex(c => c.contactInfo._id === payload.messageInfo.receiverId || c.contactInfo._id === payload.messageInfo.senderId);\r\n\r\n          console.log(\"index:\")\r\n          console.log(index)\r\n          if(index != -1){\r\n               state.contacts[index].messageInfo = payload.messageInfo\r\n               state.contacts[index].messageInfo.status = payload.status;\r\n          }\r\n          \r\n          return state;\r\n     } \r\n\r\n     \r\n\r\n\r\n     if (type === MESSAGE_SEND_SUCCESS_CLEAR) {\r\n          return {\r\n               ...state,\r\n               messageSendSuccess: false\r\n          }\r\n     }\r\n\r\n\r\n     if (type === SEEN_MESSAGE) {\r\n          const index = state.contacts.findIndex(c => c.contactInfo._id === payload.messageInfo.receiverId || c.contactInfo._id === payload.messageInfo.senderId);\r\n          state.contacts[index].messageInfo.status = 'seen';\r\n          return {\r\n               ...state\r\n          };\r\n     }\r\n\r\n     if (type === DELIVERED_MESSAGE) {\r\n          const index = state.contacts.findIndex(c => c.contactInfo._id === payload.messageInfo.receiverId || c.contactInfo._id === payload.messageInfo.senderId);\r\n          state.contacts[index].messageInfo.status = 'delivered';\r\n          return {\r\n               ...state\r\n          };\r\n     }\r\n\r\n\r\n     if (type === UPDATE) {\r\n          const index = state.contacts.findIndex(c => c.contactInfo._id === payload.id);\r\n          if (state.contacts[index].messageInfo) {\r\n               state.contacts[index].messageInfo.status = 'seen';\r\n          }\r\n          return {\r\n               ...state\r\n          }\r\n     }\r\n\r\n     if (type === MESSAGE_GET_SUCCESS_CLEAR) {\r\n          return {\r\n               ...state,\r\n               messageGetSuccess: false\r\n          }\r\n     }\r\n\r\n     if (type === SEEN_ALL) {\r\n          const index = state.contacts.contactIndex(c => c.contactInfo._id === payload.receiverId);\r\n          state.contacts[index].messageInfo.status = 'seen';\r\n          return {\r\n               ...state\r\n          }\r\n     }\r\n\r\n     if (type === LOGOUT_SUCCESS) {\r\n          return {\r\n               ...state,\r\n               contacts: [],\r\n               message: [],\r\n               messageSendSuccess: false,\r\n               messageGetSuccess: false,\r\n\r\n          }\r\n     }\r\n\r\n     if (type === NEW_USER_ADD) {\r\n          return {\r\n               ...state,\r\n               new_user_add: payload.new_user_add\r\n          }\r\n     }\r\n\r\n     if (type === NEW_USER_ADD_CLEAR) {\r\n          return {\r\n               ...state,\r\n               new_user_add: ''\r\n          }\r\n     }\r\n     if (type === USER_LOGOUT) {\r\n          return {\r\n               ...state,\r\n               contacts: [],\r\n               message: [],\r\n               messageSendSuccess: false,\r\n               messageGetSuccess: false,\r\n               new_user_add: '',\r\n\r\n          }\r\n\r\n     }\r\n\r\n\r\n\r\n     return state;\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}